{"ast":null,"code":"import React from\"react\";import styles from\"../styles/UpgradeModal.module.css\";import{motion,AnimatePresence}from\"framer-motion\";import{X}from\"lucide-react\";import plans from\"../config/pricing\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function UpgradeModal(_ref){let{isOpen,onClose}=_ref;const handleUpgrade=async priceId=>{try{const res=await fetch(\"/api/stripe/create-checkout-session\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({priceId,userId:localStorage.getItem(\"userId\")})});const data=await res.json();if(data!==null&&data!==void 0&&data.url){window.location.href=data.url;}else{throw new Error(\"No checkout URL returned\");}}catch(err){console.error(err);alert(\"Failed to start checkout.\");}};return/*#__PURE__*/_jsx(AnimatePresence,{children:isOpen&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(motion.div,{className:styles.overlay,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:onClose}),/*#__PURE__*/_jsxs(motion.div,{className:styles.modal,initial:{opacity:0,scale:0.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0.95},transition:{duration:0.2},children:[/*#__PURE__*/_jsx(\"button\",{className:styles.closeButton,onClick:onClose,\"aria-label\":\"Close\",children:/*#__PURE__*/_jsx(X,{size:20})}),/*#__PURE__*/_jsx(\"h2\",{className:styles.title,children:\"Upgrade Your Plan\"}),/*#__PURE__*/_jsx(\"p\",{className:styles.description,children:\"Choose a plan to unlock premium features and grow your health journey.\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.plans,children:Array.isArray(plans)&&plans.length>0?plans.filter(plan=>plan.price>0).map(plan=>/*#__PURE__*/_jsxs(\"div\",{className:styles.plan,children:[/*#__PURE__*/_jsx(\"h3\",{children:plan.name}),/*#__PURE__*/_jsxs(\"p\",{className:styles.price,children:[\"$\",plan.price,\"/month\"]}),/*#__PURE__*/_jsx(\"p\",{className:styles.planDescription,children:plan.description}),/*#__PURE__*/_jsx(\"ul\",{className:styles.features,children:Array.isArray(plan.features)&&plan.features.map((feature,idx)=>/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u2705 \",feature]},idx))}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleUpgrade(plan.stripePriceId),className:styles.upgradeButton,children:[\"Upgrade to \",plan.name]})]},plan.id)):/*#__PURE__*/_jsx(\"p\",{className:styles.noPlans,children:\"No plans available.\"})})]})]})});}","map":{"version":3,"names":["React","styles","motion","AnimatePresence","X","plans","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UpgradeModal","_ref","isOpen","onClose","handleUpgrade","priceId","res","fetch","method","headers","body","JSON","stringify","userId","localStorage","getItem","data","json","url","window","location","href","Error","err","console","error","alert","children","div","className","overlay","initial","opacity","animate","exit","onClick","modal","scale","transition","duration","closeButton","size","title","description","Array","isArray","length","filter","plan","price","map","name","planDescription","features","feature","idx","stripePriceId","upgradeButton","id","noPlans"],"sources":["/Users/bosurambitra/Desktop/Investify1.0/src/components/UpgradeModal.js"],"sourcesContent":["import React from \"react\";\nimport styles from \"../styles/UpgradeModal.module.css\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { X } from \"lucide-react\";\nimport plans from \"../config/pricing\";\n\nexport default function UpgradeModal({ isOpen, onClose }) {\n  const handleUpgrade = async (priceId) => {\n    try {\n      const res = await fetch(\"/api/stripe/create-checkout-session\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          priceId,\n          userId: localStorage.getItem(\"userId\"),\n        }),\n      });\n\n      const data = await res.json();\n      if (data?.url) {\n        window.location.href = data.url;\n      } else {\n        throw new Error(\"No checkout URL returned\");\n      }\n    } catch (err) {\n      console.error(err);\n      alert(\"Failed to start checkout.\");\n    }\n  };\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <>\n          {/* Overlay */}\n          <motion.div\n            className={styles.overlay}\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            onClick={onClose}\n          />\n\n          {/* Modal */}\n          <motion.div\n            className={styles.modal}\n            initial={{ opacity: 0, scale: 0.95 }}\n            animate={{ opacity: 1, scale: 1 }}\n            exit={{ opacity: 0, scale: 0.95 }}\n            transition={{ duration: 0.2 }}\n          >\n            <button\n              className={styles.closeButton}\n              onClick={onClose}\n              aria-label=\"Close\"\n            >\n              <X size={20} />\n            </button>\n\n            <h2 className={styles.title}>Upgrade Your Plan</h2>\n            <p className={styles.description}>\n              Choose a plan to unlock premium features and grow your health journey.\n            </p>\n\n            <div className={styles.plans}>\n              {Array.isArray(plans) && plans.length > 0 ? (\n                plans\n                  .filter((plan) => plan.price > 0)\n                  .map((plan) => (\n                    <div key={plan.id} className={styles.plan}>\n                      <h3>{plan.name}</h3>\n                      <p className={styles.price}>${plan.price}/month</p>\n                      <p className={styles.planDescription}>{plan.description}</p>\n                      <ul className={styles.features}>\n                        {Array.isArray(plan.features) &&\n                          plan.features.map((feature, idx) => (\n                            <li key={idx}>âœ… {feature}</li>\n                          ))}\n                      </ul>\n                      <button\n                        onClick={() => handleUpgrade(plan.stripePriceId)}\n                        className={styles.upgradeButton}\n                      >\n                        Upgrade to {plan.name}\n                      </button>\n                    </div>\n                  ))\n              ) : (\n                <p className={styles.noPlans}>No plans available.</p>\n              )}\n            </div>\n          </motion.div>\n        </>\n      )}\n    </AnimatePresence>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}